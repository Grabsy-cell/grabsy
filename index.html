<nav id="grabsy-navbar">
  <ul>
    <li data-category="all">All</li>
    <li data-category="Men">Men</li>
    <li data-category="Women">Women</li>
    <li data-category="Kids">Kids</li>
    <li data-category="Home & Kitchen">Home & Kitchen</li>
    <li data-category="Beauty">Beauty & Health</li>
  </ul>
</nav>

<div id="grabsy-products"></div>

<script>
  const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRyjqk5-lDiw3arwv281cvWMPyAfp7_uBUXVWlQslsixT-u5fAXSNmV0gkB5-HieWRqYGOI7JFdhsJ8/pub?output=csv";

  async function fetchProducts() {
    const res = await fetch(sheetUrl);
    const text = await res.text();
    const rows = text.split("\n").map(r => r.split(","));
    const headers = rows[0];
    const products = rows.slice(1).map(r => {
      let obj = {};
      headers.forEach((h,i) => obj[h.trim()] = r[i]);
      return obj;
    });
    return products;
  }

  function displayProducts(products, filter="all") {
    const container = document.getElementById("grabsy-products");
    container.innerHTML = "";
    products.filter(p => filter === "all" || (p.Category && p.Category.trim() === filter))
      .forEach(p => {
        const div = document.createElement("div");
        div.className = "grabsy-product";
        div.innerHTML = `
          <img src="${p["Image URL"]}" alt="${p["Product Name"]}" />
          <h3>${p["Product Name"]}</h3>
          <p>${p.Description}</p>
          <a href="${p["Amazon Link"]}" target="_blank">${p.Price}</a>
        `;
        container.appendChild(div);
      });
  }

  fetchProducts().then(products => {
    displayProducts(products);

    document.querySelectorAll("#grabsy-navbar li").forEach(tab => {
      tab.addEventListener("click", () => {
        displayProducts(products, tab.dataset.category);
      });
    });
  });
</script>

<style>
  #grabsy-navbar { text-align:center; margin:20px 0; }
  #grabsy-navbar ul { list-style:none; padding:0; display:flex; justify-content:center; gap:15px; }
  #grabsy-navbar li { cursor:pointer; padding:5px 10px; border-radius:5px; }
  #grabsy-navbar li:hover { background:#eee; }
  .grabsy-product { border:1px solid #ddd; padding:15px; margin:10px; border-radius:10px; max-width:250px; display:inline-block; vertical-align:top; }
  .grabsy-product img { width:100%; height:auto; }
</style>
